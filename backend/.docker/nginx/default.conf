server {
    listen 80;

    # /static/ serves everything from /data/
    # Backend stores files at /data/images/... (volume root)
    # nginx mounts the same volume at /data/
    # e.g., /static/42/1/image.png â†’ /data/42/1/image.png
    location /static/ {
        alias /data/;
        autoindex off;

        # Cache static files
        expires 1d;
        add_header Cache-Control "public, immutable";

        # CORS headers for frontend access
        add_header Access-Control-Allow-Origin "*";
        add_header Access-Control-Allow-Methods "GET, OPTIONS";
        add_header Access-Control-Allow-Headers "Origin, Accept, Content-Type";
    }

    # Health check endpoint
    location / {
        return 200 "OK";
        add_header Content-Type text/plain;
    }
}
